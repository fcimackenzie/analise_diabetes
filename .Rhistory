#   + `1` - Sim
#region
diab_estados <- survey::svytable(~ q030 + region + v0026, pns_design_srvyr )
diab_estados.df <- as.data.frame(diab_estados)
diab_estados.df <- diab_estados.df[diab_estados.df$q030 == '1',]
#diab_estados.df$Freq <- diab_estados.df$Freq / sum(diab_estados.df$Freq)
diab_estados.df$v0026 = as.character(diab_estados.df$v0026)
diab_estados.df$v0026[diab_estados.df$v0026 == 1]  = "1 - Urbano"
diab_estados.df$v0026[diab_estados.df$v0026 == 2]  = "2 - Rural"
p <-ggplot(data=diab_estados.df, aes(x=region, y=Freq/1000, fill=v0026)) +
geom_bar(stat="identity") +
geom_text(aes(label=round(Freq/1000, digits = 1)), vjust=1, color="black", size=3.5)
p
View(diab_estados.df)
#* `Q030`	- Algum médico já lhe deu o diagnóstico de diabetes?
#   + `1` - Sim
#region
diab_estados <- survey::svytable(~ q030 + region + v0026, pns_design_srvyr )
diab_estados.df <- as.data.frame(diab_estados)
print(sum(diab_estados.df[diab_estados.df$region == 'Sudeste', c("Freq")]))
diab_estados.df <- diab_estados.df[diab_estados.df$q030 == '1',]
#diab_estados.df$Freq <- diab_estados.df$Freq / sum(diab_estados.df$Freq)
diab_estados.df$v0026 = as.character(diab_estados.df$v0026)
diab_estados.df$v0026[diab_estados.df$v0026 == 1]  = "1 - Urbano"
diab_estados.df$v0026[diab_estados.df$v0026 == 2]  = "2 - Rural"
p <-ggplot(data=diab_estados.df, aes(x=region, y=Freq/1000, fill=v0026)) +
geom_bar(stat="identity") +
geom_text(aes(label=round(Freq/1000, digits = 1)), vjust=1, color="black", size=3.5)
p
survey::svytable(~region, pns_design_srvyr )
survey::svytable(~region + v0026, pns_design_srvyr )
dist_populacao <- survey::svytable(~region + v0026, pns_design_srvyr )
dist_populacao <- as.data.frame(survey::svytable(~region + v0026, pns_design_srvyr ))
dist_populacao$total = dist_populacao$
View(dist_populacao)
dist_populacao <- as.data.frame(survey::svytable(~region + v0026, pns_design_srvyr ))
pop_aux <- dist_populacao[dist_populacao$v0026 == 2,]
View(pop_aux)
dist_populacao <- as.data.frame(survey::svytable(~region + v0026, pns_design_srvyr ))
pop_aux1 <- dist_populacao[dist_populacao$v0026 == 2,]
pop_aux2 <- dist_populacao[dist_populacao$v0026 == 2,]
dist_populacao <- as.data.frame(survey::svytable(~region + v0026, pns_design_srvyr ))
pop_aux1 <- dist_populacao[dist_populacao$v0026 == 1,]
colnames(pop_aux1$v0026) <- "Urbano"
dist_populacao <- as.data.frame(survey::svytable(~region + v0026, pns_design_srvyr ))
pop_aux1 <- dist_populacao[dist_populacao$v0026 == 1,]
colnames(pop_aux1) <- c("Regiao", "Urbano", "Freq_Urbano")
pop_aux2 <- dist_populacao[dist_populacao$v0026 == 2,]
colnames(pop_aux2) <- c("Regiao", "Rural", "Freq_Rural")
View(pop_aux1)
View(pop_aux1)
dist_populacao <- as.data.frame(survey::svytable(~region + v0026, pns_design_srvyr ))
pop_aux1 <- dist_populacao[dist_populacao$v0026 == 1,]
colnames(pop_aux1) <- c("Regiao", "Urbano", "Freq_Urbano")
pop_aux2 <- dist_populacao[dist_populacao$v0026 == 2,]
colnames(pop_aux2) <- c("Regiao", "Rural", "Freq_Rural")
dist_populacao <- cbind(pop_aux1,pop_aux1[, c("Rural", "Freq_Rural")])
dist_populacao <- as.data.frame(survey::svytable(~region + v0026, pns_design_srvyr ))
pop_aux1 <- dist_populacao[dist_populacao$v0026 == 1,]
colnames(pop_aux1) <- c("Regiao", "Urbano", "Freq_Urbano")
pop_aux2 <- dist_populacao[dist_populacao$v0026 == 2,]
colnames(pop_aux2) <- c("Regiao", "Rural", "Freq_Rural")
dist_populacao <- cbind(pop_aux1,pop_aux2[, c("Rural", "Freq_Rural")])
dist_populacao <- as.data.frame(survey::svytable(~region + v0026, pns_design_srvyr ))
pop_aux1 <- dist_populacao[dist_populacao$v0026 == 1,]
colnames(pop_aux1) <- c("Regiao", "Urbano", "Freq_Urbano")
pop_aux2 <- dist_populacao[dist_populacao$v0026 == 2,]
colnames(pop_aux2) <- c("Regiao", "Rural", "Freq_Rural")
dist_populacao <- cbind(pop_aux1,pop_aux2[, c("Rural", "Freq_Rural")])
dist_populacao$total <- dist_populacao$Freq_Urbano + dist_populacao$Freq_Rural
dist_populacao
#* `Q030`	- Algum médico já lhe deu o diagnóstico de diabetes?
#   + `1` - Sim
#region
diab_estados <- survey::svytable(~ q030 + region + v0026, pns_design_srvyr )
diab_estados.df <- as.data.frame(diab_estados)
print(sum(diab_estados.df[diab_estados.df$region == 'Sudeste', c("Freq")]))
diab_estados.df <- diab_estados.df[diab_estados.df$q030 == '1',]
#diab_estados.df$Freq <- diab_estados.df$Freq / sum(diab_estados.df$Freq)
diab_estados.df$v0026 = as.character(diab_estados.df$v0026)
diab_estados.df$v0026[diab_estados.df$v0026 == 1]  = "1 - Urbano"
diab_estados.df$v0026[diab_estados.df$v0026 == 2]  = "2 - Rural"
p <-ggplot(data=diab_estados.df, aes(x=region, y=Freq/1000, fill=v0026)) +
geom_bar(stat="identity") +
geom_text(aes(label=round(Freq, digits = 1)), vjust=1, color="black", size=3.5)
p
#* `Q030`	- Algum médico já lhe deu o diagnóstico de diabetes?
#   + `1` - Sim
#region
diab_estados <- survey::svytable(~ q030 + region + v0026, pns_design_srvyr )
diab_estados.df <- as.data.frame(diab_estados)
print(sum(diab_estados.df[diab_estados.df, c("Freq")]))
#* `Q030`	- Algum médico já lhe deu o diagnóstico de diabetes?
#   + `1` - Sim
#region
diab_estados <- survey::svytable(~ q030 + region + v0026, pns_design_srvyr )
diab_estados.df <- as.data.frame(diab_estados)
print(sum(diab_estados.df[, c("Freq")]))
diab_estados.df <- diab_estados.df[diab_estados.df$q030 == '1',]
#diab_estados.df$Freq <- diab_estados.df$Freq / sum(diab_estados.df$Freq)
diab_estados.df$v0026 = as.character(diab_estados.df$v0026)
diab_estados.df$v0026[diab_estados.df$v0026 == 1]  = "1 - Urbano"
diab_estados.df$v0026[diab_estados.df$v0026 == 2]  = "2 - Rural"
p <-ggplot(data=diab_estados.df, aes(x=region, y=Freq/1000, fill=v0026)) +
geom_bar(stat="identity") +
geom_text(aes(label=round(Freq, digits = 1)), vjust=1, color="black", size=3.5)
p
#* `Q030`	- Algum médico já lhe deu o diagnóstico de diabetes?
#   + `1` - Sim
#region
diab_estados <- survey::svytable(~ q030 + region + v0026, pns_design_srvyr )
diab_estados.df <- as.data.frame(diab_estados)
diab_estados.df <- diab_estados.df[diab_estados.df$q030 == '1',]
#diab_estados.df$Freq <- diab_estados.df$Freq / sum(diab_estados.df$Freq)
print(sum(diab_estados.df[, c("Freq")]))
diab_estados.df$v0026 = as.character(diab_estados.df$v0026)
diab_estados.df$v0026[diab_estados.df$v0026 == 1]  = "1 - Urbano"
diab_estados.df$v0026[diab_estados.df$v0026 == 2]  = "2 - Rural"
p <-ggplot(data=diab_estados.df, aes(x=region, y=Freq/1000, fill=v0026)) +
geom_bar(stat="identity") +
geom_text(aes(label=round(Freq, digits = 1)), vjust=1, color="black", size=3.5)
p
#* `Q030`	- Algum médico já lhe deu o diagnóstico de diabetes?
#   + `1` - Sim
#region
diab_estados <- survey::svytable(~ q030 + region + v0026, pns_design_srvyr )
diab_estados.df <- as.data.frame(diab_estados)
diab_estados.df <- diab_estados.df[diab_estados.df$q030 == '1',]
#diab_estados.df$Freq <- diab_estados.df$Freq / sum(diab_estados.df$Freq)
print(sum(diab_estados.df[, c("Freq")]))
diab_estados.df$v0026 = as.character(diab_estados.df$v0026)
diab_estados.df$v0026[diab_estados.df$v0026 == 1]  = "1 - Urbano"
diab_estados.df$v0026[diab_estados.df$v0026 == 2]  = "2 - Rural"
p <-ggplot(data=diab_estados.df, aes(x=region, y=Freq/1000, fill=v0026)) +
geom_bar(stat="identity") +
geom_text(aes(label=round(Freq/1000, digits = 1)), vjust=1, color="black", size=3.5)
p
diab_estados <- survey::svytable(~ v0001 + q030 , pns_design_srvyr)
diab_estados <- as.data.frame(survey::svytable(~ v0001 + q030 , pns_design_srvyr))
View(diab_estados)
diab_estados <- as.data.frame(survey::svytable(~ v0001 + q030 , pns_design_srvyr))
aggregate(diab_estados$Freq, by=list(Category=diab_estados$v0001), FUN=sum)
diab_estados <- as.data.frame(survey::svytable(~ v0001 + q030 , pns_design_srvyr))
qtd_estados = aggregate(diab_estados$Freq, by=list(Category=diab_estados$v0001), FUN=sum)
View(qtd_estados)
diab_estados <- as.data.frame(survey::svytable(~ v0001 + q030 , pns_design_srvyr))
qtd_estados = aggregate(diab_estados$Freq, by=list(Category=diab_estados$v0001), FUN=sum)
diab_estados <- diab_estados[diab_estados$q030 == 1,]
diab_estados <- as.data.frame(survey::svytable(~ v0001 + q030 , pns_design_srvyr))
qtd_estados = aggregate(diab_estados$Freq, by=list(Category=diab_estados$v0001), FUN=sum)
diab_estados <- diab_estados[diab_estados$q030 == 1,]
diab_estados$Porcent <- diab_estados$Freq / qtd_estados$x
View(teste)
#* `Q030`	- Algum médico já lhe deu o diagnóstico de diabetes?
#   + `1` - Sim
#   + V0001 - Unidade da Federação
library(brazilmaps)
mapa <- get_brmap("State")
diab_estados <- as.data.frame(survey::svytable(~ v0001 + q030 , pns_design_srvyr))
qtd_estados = aggregate(diab_estados$Freq, by=list(Category=diab_estados$v0001), FUN=sum)
diab_estados <- diab_estados[diab_estados$q030 == 1,]
diab_estados$Porcent <- diab_estados$Freq / qtd_estados$x
teste <- toupper(c("Rondônia","Acre","Amazonas","Roraima","Pará","Amapá","Tocantins","Maranhão","Piauí","Ceará",
"Rio Grande do Norte","Paraíba","Pernambuco","Alagoas","Sergipe","Bahia","Minas Gerais","Espírito Santo","Rio de Janeiro","São Paulo","Paraná","Santa Catarina","Rio Grande do Sul","Mato Grosso do Sul",
"Mato Grosso","Goiás","Distrito Federal"))
porc_est <- as.data.frame(teste)
porc_est$Freq <- diab_estados.df$Porcent
uf_map <- get_brmap("State") %>%
inner_join(porc_est, c("nome" = "teste"))
uf_map %>%
ggplot() +
geom_sf(aes(fill = Porcent))+
scale_fill_continuous(low = "lightblue", high = "darkblue")
View(porc_est)
#* `Q030`	- Algum médico já lhe deu o diagnóstico de diabetes?
#   + `1` - Sim
#   + V0001 - Unidade da Federação
library(brazilmaps)
mapa <- get_brmap("State")
diab_estados <- as.data.frame(survey::svytable(~ v0001 + q030 , pns_design_srvyr))
qtd_estados = aggregate(diab_estados$Freq, by=list(Category=diab_estados$v0001), FUN=sum)
diab_estados <- diab_estados[diab_estados$q030 == 1,]
diab_estados$Porcent <- diab_estados$Freq / qtd_estados$x
teste <- toupper(c("Rondônia","Acre","Amazonas","Roraima","Pará","Amapá","Tocantins","Maranhão","Piauí","Ceará",
"Rio Grande do Norte","Paraíba","Pernambuco","Alagoas","Sergipe","Bahia","Minas Gerais","Espírito Santo","Rio de Janeiro","São Paulo","Paraná","Santa Catarina","Rio Grande do Sul","Mato Grosso do Sul",
"Mato Grosso","Goiás","Distrito Federal"))
porc_est <- as.data.frame(teste)
porc_est$Porcent <- diab_estados.df$Porcent
uf_map <- get_brmap("State") %>%
inner_join(porc_est, c("nome" = "teste"))
uf_map %>%
ggplot() +
geom_sf(aes(fill = Porcent))+
scale_fill_continuous(low = "lightblue", high = "darkblue")
#* `Q030`	- Algum médico já lhe deu o diagnóstico de diabetes?
#   + `1` - Sim
#   + V0001 - Unidade da Federação
library(brazilmaps)
mapa <- get_brmap("State")
diab_estados <- as.data.frame(survey::svytable(~ v0001 + q030 , pns_design_srvyr))
qtd_estados = aggregate(diab_estados$Freq, by=list(Category=diab_estados$v0001), FUN=sum)
diab_estados <- diab_estados[diab_estados$q030 == 1,]
diab_estados$Porcent <- diab_estados$Freq / qtd_estados$x
teste <- toupper(c("Rondônia","Acre","Amazonas","Roraima","Pará","Amapá","Tocantins","Maranhão","Piauí","Ceará",
"Rio Grande do Norte","Paraíba","Pernambuco","Alagoas","Sergipe","Bahia","Minas Gerais","Espírito Santo","Rio de Janeiro","São Paulo","Paraná","Santa Catarina","Rio Grande do Sul","Mato Grosso do Sul",
"Mato Grosso","Goiás","Distrito Federal"))
porc_est <- as.data.frame(teste)
porc_est$Porcent <- diab_estados$Porcent
uf_map <- get_brmap("State") %>%
inner_join(porc_est, c("nome" = "teste"))
uf_map %>%
ggplot() +
geom_sf(aes(fill = Porcent))+
scale_fill_continuous(low = "lightblue", high = "darkblue")
dist_populacao <- as.data.frame(survey::svytable(~region + v0026, pns_design_srvyr ))
pop_aux1 <- dist_populacao[dist_populacao$v0026 == 1,]
colnames(pop_aux1) <- c("Regiao", "Urbano", "Freq_Urbano")
pop_aux2 <- dist_populacao[dist_populacao$v0026 == 2,]
colnames(pop_aux2) <- c("Regiao", "Rural", "Freq_Rural")
dist_populacao <- cbind(pop_aux1,pop_aux2[, c("Rural", "Freq_Rural")])
dist_populacao$total <- dist_populacao$Freq_Urbano + dist_populacao$Freq_Rural
dist_populacao[,c("Regiao", "Freq_Urbano", "Freq_Rural")]
#* `Q030`	- Algum médico já lhe deu o diagnóstico de diabetes?
#   + `1` - Sim
#region
diab_estados <- survey::svytable(~ q030 + region + v0026, pns_design_srvyr )
diab_estados.df <- as.data.frame(diab_estados)
diab_estados.df <- diab_estados.df[diab_estados.df$q030 == '1',]
#diab_estados.df$Freq <- diab_estados.df$Freq / sum(diab_estados.df$Freq)
diab_estados.df$v0026 = as.character(diab_estados.df$v0026)
diab_estados.df$v0026[diab_estados.df$v0026 == 1]  = "1 - Urbano"
diab_estados.df$v0026[diab_estados.df$v0026 == 2]  = "2 - Rural"
p <-ggplot(data=diab_estados.df, aes(x=region, y=Freq/1000, fill=v0026)) +
geom_bar(stat="identity") +
geom_text(aes(label=round(Freq/1000, digits = 1)), vjust=1, color="black", size=3.5)
p
pns_design_srvyr$variables$q031
idade_diag <- as.data.frame(survey::svytable(~ q030 + q031 , pns_design_srvyr))
View(idade_diag)
idade_diag <- as.data.frame(survey::svytable(~ q030 + q031 , pns_design_srvyr))
idade_diag <- idade_diag[idade_diag$q030 == 1]
idade_diag <- as.data.frame(survey::svytable(~ q030 + q031 , pns_design_srvyr))
idade_diag <- idade_diag[idade_diag$q030 == 1,]
idade_diag <- as.data.frame(survey::svytable(~ q030 + q031 , pns_design_srvyr))
idade_diag <- idade_diag[idade_diag$q030 == 1,]
print(sum(idade_diag$Freq))
?distplot
?plot
idade_diag <- as.data.frame(survey::svytable(~ q030 + q031 , pns_design_srvyr))
idade_diag <- idade_diag[idade_diag$q030 == 1,]
plot(x=idade_diag$q031, y = idade_diag$Freq)
?hist
hist(x=idade_diag$q031, freq = idade_diag$Freq)
hist(x=as.numeric(idade_diag$q031), freq = idade_diag$Freq)
?subset
teste <- as.data.frame(survey::svytable(~q031 , subset(pns_design_srvyr, q030==1)))
View(teste)
sum(teste$Freq)
teste <- as.data.frame(subset(pns_design_srvyr, q030==1))
teste <- as.data.frame(subset(pns_design_srvyr$variables$q031, q030==1))
teste <- as.data.frame(subset(pns_design_srvyr$variables$q031, pns_design_srvyr$variables$q030==1))
subset(dclus1, sch.wide=="Yes" & comp.imp=="Yes")
#subset(dclus1, sch.wide=="Yes" & comp.imp=="Yes")
svyhist(~q031, pns_design_srvyr)
#subset(dclus1, sch.wide=="Yes" & comp.imp=="Yes")
survey::svyhist(~q031, pns_design_srvyr)
#subset(dclus1, sch.wide=="Yes" & comp.imp=="Yes")
survey::svyhist(as.numeric(~q031), pns_design_srvyr)
#subset(dclus1, sch.wide=="Yes" & comp.imp=="Yes")
survey::svyhist(~as.numeric(q031), pns_design_srvyr)
#subset(dclus1, sch.wide=="Yes" & comp.imp=="Yes")
survey::svyhist(~as.numeric(q031), subset(pns_design_srvyr, q030==1))
survey::svyhist(~as.numeric(q031), subset(pns_design_srvyr, q030==1))
dens<-svysmooth(~as.numeric(q031), subset(pns_design_srvyr, q030==1))
survey::svyhist(~as.numeric(q031), subset(pns_design_srvyr, q030==1))
dens <- survey::svysmooth(~as.numeric(q031), subset(pns_design_srvyr, q030==1))
survey::svyhist(~as.numeric(q031), subset(pns_design_srvyr, q030==1))
dens <- survey::svysmooth(~as.numeric(q031), subset(pns_design_srvyr, q030==1))
lines(dens,col="purple",lwd=3)
survey::svyhist(~as.numeric(q031), subset(pns_design_srvyr, q030==1))
dens <- survey::svysmooth(~as.numeric(q031), subset(pns_design_srvyr, q030==1))
lines(dens,col="green",lwd=2)
survey::svyhist(~as.numeric(q031), subset(pns_design_srvyr, q030==1))
dens <- survey::svysmooth(~as.numeric(q031), subset(pns_design_srvyr, q030==1))
lines(dens,col="blue",lwd=2)
survey::svyhist(~as.numeric(q031), subset(pns_design_srvyr, q030==1))
dens <- survey::svysmooth(~as.numeric(q031), subset(pns_design_srvyr, q030==1),bandwidth=30)
lines(dens,col="blue",lwd=2)
survey::svyhist(~as.numeric(q031), subset(pns_design_srvyr, q030==1))
dens <- survey::svysmooth(~as.numeric(q031), subset(pns_design_srvyr, q030==1),bandwidth=90)
lines(dens,col="blue",lwd=2)
survey::svyhist(~as.numeric(q031), subset(pns_design_srvyr, q030==1))
dens <- survey::svysmooth(~as.numeric(q031), subset(pns_design_srvyr, q030==1),bandwidth=3)
lines(dens,col="blue",lwd=2)
survey::svyhist(~as.numeric(q031), subset(pns_design_srvyr, q030==1))
dens <- survey::svysmooth(~as.numeric(q031), subset(pns_design_srvyr, q030==1))
lines(dens,col="blue",lwd=2)
survey::svyhist(~as.numeric(q031), subset(pns_design_srvyr, q030==1))
dens <- survey::svysmooth(~as.numeric(q031), subset(pns_design_srvyr, q030==1))
lines(dens,col="blue",lwd=2)
knitr::opts_chunk$set(echo = TRUE)
# c006 variavel do sexo do individuo
diab_sexo <- survey::svytable(~ q030 + c006, pns_design_srvyr)
diab_sexo.df <- as.data.frame(diab_sexo)
diab_sexo.df[diab_sexo.df$c006 == "masculino",c("Freq")] <- diab_sexo.df[diab_sexo.df$c006 == "masculino",c("Freq")]/sum(diab_sexo.df[diab_sexo.df$c006 == "masculino",c("Freq")] )
diab_sexo.df[diab_sexo.df$c006 == "feminino",c("Freq")] <- diab_sexo.df[diab_sexo.df$c006 == "feminino",c("Freq")]/sum(diab_sexo.df[diab_sexo.df$c006 == "feminino",c("Freq")] )
diab_sexo.df$q030 <-  c("Não Aplicável", "Diabético", "Diabete Gestacional", "Não Diabético", "Não Aplicável", "Diabético", "Diabete Gestacional", "Não Diabético")
p1 <-ggplot(data=diab_sexo.df, aes(x=q030, y=Freq*100 ,fill=c006)) +
geom_bar(position="dodge", stat="identity") +
geom_text(aes(label=round(Freq*100, digits = 1)), position=position_dodge(width=0.9), vjust=-0.5, color="black", size=3.5)+
theme_minimal()+
ggtitle("Porcentagem diabetes em relação ao sexo") +
xlab("Categoria") + ylab("Porcentagem %")
knitr::opts_chunk$set(echo = TRUE)
library(srvyr)
library(ggplot2)
library(ggpubr)
library(dplyr)
library(knitr)
library(tidyr)
#Utilizando o pacote `srvyr`
library(srvyr)
library(ggplot2)
library(ggpubr)
library(dplyr)
library(knitr)
library(tidyr)
# c006 variavel do sexo do individuo
diab_sexo <- survey::svytable(~ q030 + c006, pns_design_srvyr)
diab_sexo.df <- as.data.frame(diab_sexo)
diab_sexo.df[diab_sexo.df$c006 == "masculino",c("Freq")] <- diab_sexo.df[diab_sexo.df$c006 == "masculino",c("Freq")]/sum(diab_sexo.df[diab_sexo.df$c006 == "masculino",c("Freq")] )
diab_sexo.df[diab_sexo.df$c006 == "feminino",c("Freq")] <- diab_sexo.df[diab_sexo.df$c006 == "feminino",c("Freq")]/sum(diab_sexo.df[diab_sexo.df$c006 == "feminino",c("Freq")] )
diab_sexo.df$q030 <-  c("Não Aplicável", "Diabético", "Diabete Gestacional", "Não Diabético", "Não Aplicável", "Diabético", "Diabete Gestacional", "Não Diabético")
p1 <-ggplot(data=diab_sexo.df, aes(x=q030, y=Freq*100 ,fill=c006)) +
geom_bar(position="dodge", stat="identity") +
geom_text(aes(label=round(Freq*100, digits = 1)), position=position_dodge(width=0.9), vjust=-0.5, color="black", size=3.5)+
theme_minimal()+
ggtitle("Porcentagem diabetes em relação ao sexo") +
xlab("Categoria") + ylab("Porcentagem %")
p1
survey::svyhist(~as.numeric(q031), subset(pns_design_srvyr, q030==1))
dens <- survey::svysmooth(~as.numeric(q031), subset(pns_design_srvyr, q030==1))
lines(dens,col="blue",lwd=2)
#* `Q030`	- Algum médico já lhe deu o diagnóstico de diabetes?
#   + `1` - Sim
#   + V0001 - Unidade da Federação
library(brazilmaps)
mapa <- get_brmap("State")
diab_estados <- as.data.frame(survey::svytable(~ v0001 + q030 , pns_design_srvyr))
qtd_estados = aggregate(diab_estados$Freq, by=list(Category=diab_estados$v0001), FUN=sum)
diab_estados <- diab_estados[diab_estados$q030 == 1,]
diab_estados$Porcent <- diab_estados$Freq / qtd_estados$x
teste <- toupper(c("Rondônia","Acre","Amazonas","Roraima","Pará","Amapá","Tocantins","Maranhão","Piauí","Ceará",
"Rio Grande do Norte","Paraíba","Pernambuco","Alagoas","Sergipe","Bahia","Minas Gerais","Espírito Santo","Rio de Janeiro","São Paulo","Paraná","Santa Catarina","Rio Grande do Sul","Mato Grosso do Sul",
"Mato Grosso","Goiás","Distrito Federal"))
porc_est <- as.data.frame(teste)
porc_est$Porcent <- diab_estados$Porcent
uf_map <- get_brmap("State") %>%
inner_join(porc_est, c("nome" = "teste"))
uf_map %>%
ggplot() +
geom_sf(aes(fill = Porcent*100)) +
scale_fill_continuous(low = "lightblue", high = "darkblue")
#* `Q030`	- Algum médico já lhe deu o diagnóstico de diabetes?
#   + `1` - Sim
#   + V0001 - Unidade da Federação
library(brazilmaps)
mapa <- get_brmap("State")
diab_estados <- as.data.frame(survey::svytable(~ v0001 + q030 , pns_design_srvyr))
qtd_estados = aggregate(diab_estados$Freq, by=list(Category=diab_estados$v0001), FUN=sum)
diab_estados <- diab_estados[diab_estados$q030 == 1,]
diab_estados$Porcent <- diab_estados$Freq / qtd_estados$x
teste <- toupper(c("Rondônia","Acre","Amazonas","Roraima","Pará","Amapá","Tocantins","Maranhão","Piauí","Ceará",
"Rio Grande do Norte","Paraíba","Pernambuco","Alagoas","Sergipe","Bahia","Minas Gerais","Espírito Santo","Rio de Janeiro","São Paulo","Paraná","Santa Catarina","Rio Grande do Sul","Mato Grosso do Sul",
"Mato Grosso","Goiás","Distrito Federal"))
porc_est <- as.data.frame(teste)
porc_est$Porcent <- diab_estados$Porcent
uf_map <- get_brmap("State") %>%
inner_join(porc_est, c("nome" = "teste"))
uf_map %>%
ggplot() +
geom_sf(aes(fill = Porcent)) +
scale_fill_continuous(low = "lightblue", high = "darkblue")
#* `Q030`	- Algum médico já lhe deu o diagnóstico de diabetes?
#   + `1` - Sim
#   + V0001 - Unidade da Federação
library(brazilmaps)
mapa <- get_brmap("State")
diab_estados <- as.data.frame(survey::svytable(~ v0001 + q030 , pns_design_srvyr))
qtd_estados = aggregate(diab_estados$Freq, by=list(Category=diab_estados$v0001), FUN=sum)
diab_estados <- diab_estados[diab_estados$q030 == 1,]
diab_estados$Porcent <- diab_estados$Freq / qtd_estados$x
teste <- toupper(c("Rondônia","Acre","Amazonas","Roraima","Pará","Amapá","Tocantins","Maranhão","Piauí","Ceará",
"Rio Grande do Norte","Paraíba","Pernambuco","Alagoas","Sergipe","Bahia","Minas Gerais","Espírito Santo","Rio de Janeiro","São Paulo","Paraná","Santa Catarina","Rio Grande do Sul","Mato Grosso do Sul",
"Mato Grosso","Goiás","Distrito Federal"))
porc_est <- as.data.frame(teste)
porc_est$Porcent <- diab_estados$Porcent
uf_map <- get_brmap("State") %>%
inner_join(porc_est, c("nome" = "teste"))
#uf_map %>%
#  ggplot() +
#  geom_sf(aes(fill = Porcent)) +
#  scale_fill_continuous(low = "lightblue", high = "darkblue")
plot_brmap(uf_map)
#* `Q030`	- Algum médico já lhe deu o diagnóstico de diabetes?
#   + `1` - Sim
#   + V0001 - Unidade da Federação
library(brazilmaps)
mapa <- get_brmap("State")
diab_estados <- as.data.frame(survey::svytable(~ v0001 + q030 , pns_design_srvyr))
qtd_estados = aggregate(diab_estados$Freq, by=list(Category=diab_estados$v0001), FUN=sum)
diab_estados <- diab_estados[diab_estados$q030 == 1,]
diab_estados$Porcent <- diab_estados$Freq / qtd_estados$x
teste <- toupper(c("Rondônia","Acre","Amazonas","Roraima","Pará","Amapá","Tocantins","Maranhão","Piauí","Ceará",
"Rio Grande do Norte","Paraíba","Pernambuco","Alagoas","Sergipe","Bahia","Minas Gerais","Espírito Santo","Rio de Janeiro","São Paulo","Paraná","Santa Catarina","Rio Grande do Sul","Mato Grosso do Sul",
"Mato Grosso","Goiás","Distrito Federal"))
porc_est <- as.data.frame(teste)
porc_est$Porcent <- diab_estados$Porcent
uf_map <- get_brmap("State") %>%
inner_join(porc_est, c("nome" = "teste"))+
ggplot() +
geom_sf(aes(fill = Porcent)) +
scale_fill_continuous(low = "lightblue", high = "darkblue")
#* `Q030`	- Algum médico já lhe deu o diagnóstico de diabetes?
#   + `1` - Sim
#   + V0001 - Unidade da Federação
library(brazilmaps)
mapa <- get_brmap("State")
diab_estados <- as.data.frame(survey::svytable(~ v0001 + q030 , pns_design_srvyr))
qtd_estados = aggregate(diab_estados$Freq, by=list(Category=diab_estados$v0001), FUN=sum)
diab_estados <- diab_estados[diab_estados$q030 == 1,]
diab_estados$Porcent <- diab_estados$Freq / qtd_estados$x
teste <- toupper(c("Rondônia","Acre","Amazonas","Roraima","Pará","Amapá","Tocantins","Maranhão","Piauí","Ceará",
"Rio Grande do Norte","Paraíba","Pernambuco","Alagoas","Sergipe","Bahia","Minas Gerais","Espírito Santo","Rio de Janeiro","São Paulo","Paraná","Santa Catarina","Rio Grande do Sul","Mato Grosso do Sul",
"Mato Grosso","Goiás","Distrito Federal"))
porc_est <- as.data.frame(teste)
porc_est$Porcent <- diab_estados$Porcent
uf_map <- get_brmap("State") %>%
inner_join(porc_est, c("nome" = "teste"))
uf_map <-  uf_map %>%
ggplot() +
geom_sf(aes(fill = Porcent)) +
scale_fill_continuous(low = "lightblue", high = "darkblue")
plot_brmap(uf_map)
#* `Q030`	- Algum médico já lhe deu o diagnóstico de diabetes?
#   + `1` - Sim
#   + V0001 - Unidade da Federação
library(brazilmaps)
mapa <- get_brmap("State")
diab_estados <- as.data.frame(survey::svytable(~ v0001 + q030 , pns_design_srvyr))
qtd_estados = aggregate(diab_estados$Freq, by=list(Category=diab_estados$v0001), FUN=sum)
diab_estados <- diab_estados[diab_estados$q030 == 1,]
diab_estados$Porcent <- diab_estados$Freq / qtd_estados$x
teste <- toupper(c("Rondônia","Acre","Amazonas","Roraima","Pará","Amapá","Tocantins","Maranhão","Piauí","Ceará",
"Rio Grande do Norte","Paraíba","Pernambuco","Alagoas","Sergipe","Bahia","Minas Gerais","Espírito Santo","Rio de Janeiro","São Paulo","Paraná","Santa Catarina","Rio Grande do Sul","Mato Grosso do Sul",
"Mato Grosso","Goiás","Distrito Federal"))
porc_est <- as.data.frame(teste)
porc_est$Porcent <- diab_estados$Porcent
uf_map <- get_brmap("State") %>%
inner_join(porc_est, c("nome" = "teste"))
uf_map %>%
ggplot() +
geom_sf(aes(fill = Porcent)) +
scale_fill_continuous(low = "lightblue", high = "darkblue")
pns_design_srvyr[,]
pns_design_srvyr[,c("q030")]
pns_design_srvyr[,c("c006","q030", "c008", "c009", "m016", "p035", "w00103", "w00203", "w00303", "j004", "p020", "p021", "p022", "p025", "p027", "P028", "P029", "P03701", "P03702", "Q002", "Q029", "Q030", "Q060", "Q068", "Q124", "S020", "S021", "W00407", "W00408")]
pns_design_srvyr[,c("c006","q030", "c008", "c009", "m016", "p035", "w00103", "w00203", "w00303", "j004", "p020", "p021", "p022", "p025", "p027", "P028", "P029", "P03701", "P03702", "Q002", "Q029", "Q030", "Q060", "Q068", "Q124", "S020", "S021", "W00407", "W00408")]
pns_design_srvyr[,c("c006","q030", "c008", "c009", "m016", "p035", "w00103", "w00203", "w00303", "j004", "p020", "p021", "p022", "p025", "p027", "p028", "p029", "p03701", "p03702", "q002", "q029", "q030", "q060", "q068", "q124", "s020", "s021", "w00407", "w00408")]
teste = pns_design_srvyr[,c("c006","q030", "c008", "c009", "m016", "p035", "w00103", "w00203", "w00303", "j004", "p020", "p021", "p022", "p025", "p027", "p028", "p029", "p03701", "p03702", "q002", "q029", "q030", "q060", "q068", "q124", "s020", "s021", "w00407", "w00408")]
View(teste)
survey::svyhist(~as.numeric(q031), subset(pns_design_srvyr, q030==1))
dens <- survey::svysmooth(~as.numeric(q031), subset(pns_design_srvyr, (q030==1) & (q030!=" ")))
lines(dens,col="blue",lwd=2)
knitr::opts_chunk$set(echo = TRUE)
library(srvyr)
library(ggplot2)
library(ggpubr)
library(dplyr)
library(knitr)
library(tidyr)
#Utilizando o pacote `srvyr`
library(srvyr)
library(ggplot2)
library(ggpubr)
library(dplyr)
library(knitr)
library(tidyr)
teste = pns_design_srvyr[,c("c006","q030", "c008", "c009", "m016", "p035", "w00103", "w00203", "w00303", "j004", "p020", "p021", "p022", "p025", "p027", "p028", "p029", "p03701", "p03702", "q002", "q029", "q030", "q060", "q068", "q124", "s020", "s021", "w00407", "w00408", "freqativ", "fxetaria", "idade", imc)]
teste = pns_design_srvyr[,c("c006","q030", "c008", "c009", "m016", "p035", "w00103", "w00203", "w00303", "j004", "p020", "p021", "p022", "p025", "p027", "p028", "p029", "p03701", "p03702", "q002", "q029", "q030", "q060", "q068", "q124", "s020", "s021", "w00407", "w00408", "freqativ", "fxetaria", "idade", "imc")]
head(teste)
View(teste)
View(teste$variables)
View(teste$prob)
names(teste$variables)
teste = pns_design_srvyr[,c("c006", "c009", "p035", "w00103", "w00203", "w00303", "j004", "p020", "p021", "p022", "p025", "p027", "p028", "p029", "p03701", "p03702", "q002", "q029", "q030", "q060", "q068", "q124", "s020", "s021", "w00407", "w00408", "freqativ", "fxetaria", "idade", "imc")]
names(teste$variables) = c("sexo","cor_raca","dias_ativ_fisica","peso_final","altura_final","circ_cintura_final","impedimento_ativ_fisica","refrigerante_suco","tipo_refrigerante","qtd_copos","freq_doces","freq_bebida_alcoolica","dias_semana_alcool","doses_bebida_alcoolica","horas_exercicio_fisico","min_exercicio_fisico","hipertensao_arterial","ultimo_exame_glicemia","diag_diabeticos","diag_colesterol_alto","diag_avc_derrame","diag_insuficiencia_renal","exame_sangue_prenatal","diabetes_prenatal","pressao_arterial_sistolica","pressao_arterial_diastolica","freqativ","fxetaria","idade","imc")
names(teste$variables)
View(teste$variables)
teste = pns_design_srvyr[,c("c006", "c009", "p035", "w00103", "w00203", "w00303", "j004", "p020", "p021", "p022", "p025", "p027", "p028", "p029", "p03701", "p03702", "q002", "q029", "q030", "q060", "q068", "q124", "s020", "s021", "w00407", "w00408", "freqativ", "fxetaria", "idade", "imc")]
names(teste$variables) = c("sexo","cor_raca","dias_ativ_fisica","peso_final","altura_final","circ_cintura_final","impedimento_ativ_fisica","refrigerante_suco","tipo_refrigerante","qtd_copos","freq_doces","freq_bebida_alcoolica","dias_semana_alcool","doses_bebida_alcoolica","horas_exercicio_fisico","min_exercicio_fisico","hipertensao_arterial","ultimo_exame_glicemia","diag_diabeticos","diag_colesterol_alto","diag_avc_derrame","diag_insuficiencia_renal","exame_sangue_prenatal","diabetes_prenatal","pressao_arterial_sistolica","pressao_arterial_diastolica","freqativ","fxetaria","idade","imc")
summary(teste$variables)
df = pns_design_srvyr[,c("c006", "c009", "p035", "w00103", "w00203", "w00303", "j004", "p020", "p021", "p022", "p025", "p027", "p028", "p029", "p03701", "p03702", "q002", "q029", "q030", "q060", "q068", "q124", "s020", "s021", "w00407", "w00408", "freqativ", "fxetaria", "idade", "imc")]
names(df$variables) = c("sexo","cor_raca","dias_ativ_fisica","peso_final","altura_final","circ_cintura_final","impedimento_ativ_fisica","refrigerante_suco","tipo_refrigerante","qtd_copos","freq_doces","freq_bebida_alcoolica","dias_semana_alcool","doses_bebida_alcoolica","horas_exercicio_fisico","min_exercicio_fisico","hipertensao_arterial","ultimo_exame_glicemia","diag_diabeticos","diag_colesterol_alto","diag_avc_derrame","diag_insuficiencia_renal","exame_sangue_prenatal","diabetes_prenatal","pressao_arterial_sistolica","pressao_arterial_diastolica","freqativ","fxetaria","idade","imc")
summary(df$variables)
view(teste$prob)
View(teste$prob)
View(df)
View(df$cluster)
View(df$strata)
View(df$allprob)
View(df$postStrata)
